<div fxFlex="100" fxLayout="column" fxLayoutAlign="space-between stretch">
  <st2i-fiche-details
    [data]="params['infoProjet'].data"
    [metadata]="params['infoProjet'].metadata">
  </st2i-fiche-details>
  <st2i-card [metadata]="{ title: 'Gantt', classList: { cardContent: 'p-0' } }">
    <div *ngIf="params['ganttOptions'].data.length > 0">
      <ng-gantt #ngGantt [options]="params['ganttOptions'].metadata" [data]="params['ganttOptions'].data"></ng-gantt>
    </div>
  </st2i-card>
  <!--  <div fxFlex="100" fxLayout="row wrap" fxLayoutAlign="end center" class="mt-1 mb-4">-->
  <!--    <st2i-button-loading (click)="onSave()" [loading]="params.isSaveLoading" btnClass="save-btn mx-2">-->
  <!--      <div fxLayoutAlign="center center">-->
  <!--        <mat-icon class="mx-1" style="font-size: 1.4rem;">save_outline</mat-icon>-->
  <!--        <span>{{ 'general.save' | translate }}</span>-->
  <!--      </div>-->
  <!--    </st2i-button-loading>-->
  <!--    <button (click)="onPrecedent()" mat-raised-button type="button" class="cancel-btn">-->
  <!--      <mat-icon class="mx-1" style="font-size: 1.4rem;">arrow_back_outline</mat-icon>-->
  <!--      <span>{{ 'general.back' | translate }}</span>-->
  <!--    </button>-->
  <!--  </div>-->
  <!--  <div *ngIf="params['ganttOptions']['selectedDate']">-->
  <div>
    <app-d4-filter-tasks
      [date]="params['ganttOptions']['selectedDate']"
      (resetEvent)="onResetIsolationViewerTask()"
      (actualVsPlannedEventFilter)="onIsolateViewerTasksActualVsPlanned()"
      (thisMonthVsLastMonthEventFilter)="onIsolateViewerTasksMonths()"
      (viewOptionEvent)="onViewOptionChanged($event)"
      [isolateViewerTasksLoading]="params.isolateViewerTasksLoading"
    ></app-d4-filter-tasks>
  </div>
  <ng-container [ngSwitch]="params['viewOption']">
    <ng-container *ngSwitchCase="'001'">

      <st2i-card
        [metadata]="{ title: 'Viewer', classList: { card: 'fit-viewer-margin-bottom', cardContent: 'p-0 forge-viewer' }}">
        <adsk-forge-viewer [viewerOptions]="params.viewer"></adsk-forge-viewer>
      </st2i-card>
<!--      <st2i-card [metadata]="{ title: 'Viewer', classList: { cardContent: 'p-0' }}">-->
<!--        <div class="forge-viewer" id="MyViewerDiv"></div>-->
<!--      </st2i-card>-->
    </ng-container>
    <ng-container *ngSwitchCase="'002'">
      <div class="cp5" fxFlex="100" fxLayout="row wrap" fxLayoutAlign="center center">
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Actual', classList: { card: 'fit-viewer-margin-bottom', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer1"></adsk-forge-viewer>
          </st2i-card>
        </div>
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Planned', classList: { card: 'fit-viewer-margin-bottom', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer2"></adsk-forge-viewer>
          </st2i-card>
        </div>
      </div>
    </ng-container>
    <ng-container *ngSwitchCase="'003'">
      <div class="cp5" fxFlex="100" fxLayout="row wrap" fxLayoutAlign="center center">
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Actual (Last Month)', classList: { card: 'fit-viewer-margin-bottom mb-4', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer3"></adsk-forge-viewer>
          </st2i-card>
        </div>
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Actual (This Month)', classList: { card: 'fit-viewer-margin-bottom mb-4', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer5"></adsk-forge-viewer>
          </st2i-card>
        </div>
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Planned (Last Month)', classList: { card: 'fit-viewer-margin-bottom mb-2', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer4"></adsk-forge-viewer>
          </st2i-card>
        </div>
        <div fxFlex="50" fxFlex.lt-md="100">
          <st2i-card
            [metadata]="{ title: 'Planned (This Month)', classList: { card: 'fit-viewer-margin-bottom mb-2', cardContent: 'p-0 forge-viewer' }}">
            <adsk-forge-viewer [viewerOptions]="params.viewer6"></adsk-forge-viewer>
          </st2i-card>
        </div>
        <div fxFlex="100" >
          <st2i-card [metadata]="{ title: params['CPI&SPI'].metadata.title}">
            <st2i-charts [data]="params['CPI&SPI'].data" [metadata]="params['CPI&SPI'].metadata"></st2i-charts>
          </st2i-card>
        </div>
      </div>
    </ng-container>

  </ng-container>
  <div fxFlex="100" fxLayout="row wrap" fxLayoutAlign="end center">
    <button (click)="onPrecedent()" mat-raised-button type="button" class="cancel-btn">
      <mat-icon class="mx-1" style="font-size: 1.4rem;">arrow_back_outline</mat-icon>
      <span>{{ 'general.back' | translate }}</span>
    </button>
  </div>
</div>
